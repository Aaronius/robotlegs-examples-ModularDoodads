<?xml version="1.0" encoding="utf-8"?>
<s:Application xmlns:fx="http://ns.adobe.com/mxml/2009" 
               xmlns:s="library://ns.adobe.com/flex/spark" 
               xmlns:mx="library://ns.adobe.com/flex/mx"
               xmlns:modulardoodads="robotlegs.examples.modulardoodads.*" 
               xmlns:logger="robotlegs.examples.modulardoodads.modules.logger.*" 
               width="450" xmlns:doodad="robotlegs.examples.modulardoodads.modules.doodad.*" xmlns:view="robotlegs.examples.modulardoodads.view.*">

    <fx:Script>
        <![CDATA[
            import mx.modules.Module;
            
            import robotlegs.examples.modulardoodads.common.events.LoggingEvent;
            import robotlegs.examples.modulardoodads.common.events.ModuleCommandTriggerEvent;
            import robotlegs.examples.modulardoodads.modules.doodad.DoodadModule;
            protected function logIt_clickHandler(event:Event):void
            {
                dispatchEvent(new LoggingEvent(LoggingEvent.MESSAGE, logText.text));
                logText.text = "";
            }

            protected function addDoodad_clickHandler(event:MouseEvent):void
            {
                doodadHolder.addElement(new DoodadModule());
            }
            
            public function setFocusOnAddDoodadButton():void
            {
                focusManager.setFocus(addDoodad);
            }


            protected function triggerCommand_clickHandler(event:MouseEvent):void
            {
                dispatchEvent(new ModuleCommandTriggerEvent(ModuleCommandTriggerEvent.TRIGGER_MODULE_COMMAND));
            }

        ]]>
    </fx:Script>

    <fx:Declarations>
        <modulardoodads:ModularDoodadsContext contextView="{this}"/>
    </fx:Declarations>
    <s:layout>
        <s:VerticalLayout paddingBottom="5" paddingLeft="5" paddingRight="5" paddingTop="5"/>
    </s:layout>
    <s:HGroup width="100%">
        <s:Button id="logIt" label="LOG IT!" click="logIt_clickHandler(event)" enabled="{logText.text.length &gt;0}"/>
        <s:TextInput id="logText" width="100%" enter="logIt_clickHandler(event)"/>
        <s:Button id="addDoodad" label="Add a Doodad" click="addDoodad_clickHandler(event)"/>
        <s:Button id="triggerCommand" label="Trigger" click="triggerCommand_clickHandler(event)"/>
    </s:HGroup>
    <logger:LoggerModule/>
    <s:Scroller  width="100%" height="100%">
        <s:Group id="doodadHolder">
            <s:layout>
                <s:TileLayout/>
            </s:layout>
        </s:Group>
    </s:Scroller>
    <view:StatsView/>
</s:Application>
